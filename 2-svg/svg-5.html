<!DOCTYPE html>
<html>
<head>
    <title>D3 Hands On</title>
    <style>

    </style>
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="http://d3js.org/colorbrewer.v1.min.js"></script>
</head>
<body>
<h1>D3 Sample</h1>
</body>

<script type="text/javascript">

    var chart = d3.select('body')
            .append('svg')
            .attr({width: 400, height: 300})
            .append('g');

    var circle = chart.append('circle')
                    .attr('cx', 100)
                    .attr('cy', 100)
                    .attr('r', 90)
                    .style({fill: 'magenta', stroke:'black', 'stroke-width':5})
    ;

    // hidden text
    var text = chart.append('text')
            .attr('x', 100)
            .attr('y', 100)
            .attr('dy', '.35em')
            .attr('text-anchor', 'middle')
            .text("where'd it go?")
            .style('font-size', 20)
            .style('fill', 'blue')
            .style('font-family', 'monospace')
            .style('opacity', 0) // hidden
    ;

    //  transition
    circle.transition()
            .delay(1000)
            .duration(1000)
            .attr('r', 20)
            .style('stroke-width', 10)
            .style('fill', 'lightblue')
            .each('end', function() {

                // at end, run another transition
                circle.transition()
                        .delay(1000)
                        .duration(1000)
                        .style('fill', 'black')
                        .style('opacity', 0.0)
                        //.remove()
                ;

                // plus fade in text
                text.transition()
                        .delay(1000)
                        .duration(1000)
                        .style('opacity', 1)
                 ;

            })
    ;


    console.log('fin');

    /*

    // reshow the circle
    circle.style('opacity', 1).style('fill','blue')

    // remove it
    circle.remove()

     */

</script>
</html>

